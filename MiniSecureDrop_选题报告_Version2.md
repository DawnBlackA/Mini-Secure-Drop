# 基于Web的端到端加密文件共享系统（MiniSecureDrop）选题报告
基于Web的端到端加密文件共享系统选题报告

## 一、项目基本信息
- 项目名称：基于Web的端到端加密文件共享系统（MiniSecureDrop）
- 项目方向：内容安全 / 通信安全
- 小组构成：3人
- 开发语言/工具：JavaScript/TypeScript、React、Next.js（App Router）、Node.js（API Routes）、WebCrypto API、JSON

## 二、项目背景与意义
随着互联网与云服务的普及，文件共享与在线传输已成为个人与小型团队的高频需求。然而，明文传输或服务端解密的方案会带来如下风险：
- 机密性：数据可能在传输或存储过程中被窃听或泄露（如服务端明文处理）。
- 完整性与认证：身份伪造或权限绕过可能导致非法访问与篡改。
- 可用性：恶意请求与过载（如DoS）可能使系统不可用。

本项目聚焦“最小但可用”的安全文件共享，采用端到端加密（E2EE）设计，确保加密与解密在用户侧完成，服务端仅保存密文；配合JWT认证与基础入侵防护，提高系统的机密性、认证性与可用性。项目轻量、易部署、可扩展，适合个人与小型团队的私密文件传输，也为学习与教学提供可落地的实践样例。

## 三、项目目标
- 核心功能目标（≥3个安全功能）
  1) 端到端加密通信（E2EE）：前端使用 AES-GCM（256位）加密，服务端只存密文；
  2) 身份认证与访问控制：JWT 鉴权，文件资源按所有者隔离访问；
  3) 轻量级入侵防护：对 /api 路径进行速率限制与常见 SQLi/XSS 模式拦截；
- 技术目标
  - 掌握基于浏览器 WebCrypto 的对称加密与密码派生（PBKDF2）、JWT 身份认证、Next.js API 设计；
  - 实现最小可用的安全文件上传/下载链路与基础的安全中间件；
- 非功能目标
  - 标准化与开放性：遵循 AES-GCM、PBKDF2、JWT 等业界通用标准；
  - 可靠性与安全保密性：服务端不触碰明文，最小权限访问；错误与异常处理健壮；
  - 可扩充性：模块化设计，便于后续接入病毒扫描、分享令牌、对象存储等能力。

## 四、系统设计
### 4.1 总体架构
系统采用浏览器-服务端的C/S架构，以 Next.js 为基础：
- 前端（应用层）
  - 负责用户注册/登录、密码输入、在本地进行文件加密/解密；
  - 上传密文（salt + iv + cipher），下载后本地解密并导出原文件；
- 安全核心层
  - 端到端加密：AES-GCM（256位）+ PBKDF2（SHA-256，12万迭代，随机 16 字节盐，12 字节 IV）；
  - 身份认证与访问控制：JWT（Bearer Token），基于文件所有者前缀进行资源授权；
  - 入侵防护：对 /api 路径进行 10 秒内 >30 次速率限制与常见 SQLi/XSS 模式拦截；
- 通信与存储层
  - Next.js API Routes 提供注册/登录、上传、列出与下载接口；
  - 存储层演示使用本地目录，仅保存密文文件（不含明文与密钥材料）。

数据流概述：
- 加密上传：浏览器读取文件 → 使用用户口令派生密钥 → AES-GCM 加密 → 将 salt+iv+cipher 作为二进制上传 → 服务端持久化密文；
- 下载解密：浏览器获取密文 → 使用相同口令派生密钥 → AES-GCM 解密 → 还原并下载原文件。

### 4.2 核心功能模块设计
（1）端到端加解密模块（机密性保障）
- 技术选型：AES-GCM（256位）对称加密 + PBKDF2（SHA-256）密码派生；
- 核心逻辑：
  - 用户侧生成随机盐与IV，使用PBKDF2从口令派生AES密钥；
  - 加密后得到 cipher，上传的数据仅为 [salt|iv|cipher]，服务端不存明文；
  - 下载后在用户侧用同一口令与盐/IV解密，恢复原文件；
- 关键参数：盐 16字节、IV 12字节、PBKDF2 迭代≥120,000 次。

（2）身份认证与访问控制模块（认证性保障）
- 技术选型：JWT（HS256），Bearer Token 模式；
- 核心逻辑：
  - 注册/登录成功后签发短期 JWT；
  - 文件ID命名包含“所有者前缀”，列出与下载接口验证“前缀匹配”以做资源授权；
  - 未携带/过期/非法JWT的请求直接拒绝。

（3）轻量级入侵防护模块（可用性保障）
- 技术选型：基于中间件的速率限制与恶意模式拦截；
- 核心逻辑：
  - 速率限制：以IP为单位，10秒内请求次数>30则拒绝；
  - 恶意模式拦截：拦截常见 SQL 注入与 XSS 特征（如 union select、<script、1=1 等）；
  - 在网关层阻断可疑请求，保护后端稳定性与可用性。

## 五、小组分工
- 成员A（总体与加密链路）
  - 职责：系统架构与总体设计；端到端加密实现与前端交互；上传/下载解密链路联调；关键安全参数与异常处理优化。
- 成员B（认证与访问控制）
  - 职责：注册/登录接口、JWT签发与校验；文件资源授权（所有者前缀）；接口错误码与安全日志；前端会话管理。
- 成员C（入侵防护与联调）
  - 职责：中间件速率限制与恶意模式拦截；联调与灰度测试；演示脚本与文档整理；上线与部署建议。

---
备注：
- 本项目为演示级实现，默认使用本地目录存储与进程内用户表；生产环境需替换为数据库与对象存储，增加刷新令牌、审计日志、备份与告警、对象存储KMS等。
- 项目具备良好扩展性，可后续加入：VirusTotal 文件哈希扫描、一次性分享令牌、WebAuthn/TOTP 二次认证、智能合约哈希公证等。